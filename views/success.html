
<head>
  <!-- Custom styles for this template -->
  <link href="style/breadTopExpress.css" rel="stylesheet"></link>
  <script src="js/services/crud.js"></script>
  <script src="js/getTotal.js"></script>

</head>

    <div class="container" style="background:#f1f1f1; width: 1170px;">
      	<div class="row" style="height: 24px;">
          {{renewDeliveryStatus(currentDate, invoiceItems)}}
          {{becomeOverdue(currentDate, invoiceItems)}}
          <!-- {{addDeliveredInvoiceToHistory(invoiceItems)}} -->


        <!-- Jack writes code here -->

        <!-- the form when click create button -->

        	<div class="modal fade" role="dialog" id="createform">
		        <div class="modal-dialog">
		        	<!-- modal content starts here -->
		        	<div class="modal-content">
		        		<!-- popping up form title part -->
		        		<div class="modal-header">
    						<h4 class="modal-title">Create New Invoice</h4>
  						</div>
						<!--END popping up form title part -->
						<!-- popping up form main part -->
		        		<div class="modal-body">
			        		<form
                      class="form-horizontal"
			        			  name="createform"
			        			  novalidate>

			        		<!-- user info, cannot be changed. -->
		                      <div class="form-group">
		                          <label for="companyname" class="col-sm-3 control-label">Company Name:</label>
		                          <div class="col-sm-7">
		                            <input  class="form-control"
		                            placeholder="{{currentUser.companyname}}"
		                            readonly
		                            ng-required="true"
		                            >
		                          </div>
		                      </div>


		                      <div class="form-group">
		                          <label for="contactperson" class="col-sm-3 control-label">Contact Person:</label>
		                          <div class="col-sm-7">
		                            <input  class="form-control"
		                            placeholder="{{currentUser.firstname}}  {{currentUser.lastname}}"
		                            readonly
		                            ng-required="true"
		                            >
		                          </div>
		                      </div>

		                      <div class="form-group">
		                          <label for="shippingaddress" class="col-sm-3 control-label">Shipping Address:</label>
		                          <div class="col-sm-7">
		                            <input  class="form-control"
		                            placeholder="{{currentUser.address}}"
		                            readonly
		                            ng-required="true"
		                            >
		                          </div>
		                      </div>

		                      <div class="form-group">
		                          <label for="email" class="col-sm-3 control-label">Email:</label>
		                          <div class="col-sm-7">
		                            <input  class="form-control"
		                            placeholder="{{currentUser.email}}"
		                            readonly
		                            ng-required="true"
		                            >
		                          </div>
		                      </div>

		                      <div class="form-group">
		                          <label for="phonenumber" class="col-sm-3 control-label">Phone Number:</label>
		                          <div class="col-sm-7">
		                            <input  class="form-control"
		                            placeholder="{{currentUser.phonenumber}}"
		                            readonly
		                            ng-required="true"
		                            >
		                          </div>
		                      </div>
					  		<!-- END user info, cannot be changed. -->

							<!-- <div class="form-group">
						        <label for="Select" class="col-sm-3 control-label">Please select:</label>
						    </div> -->
					            <!-- uses ng-repeat to enable the item list to be added dynamicly. -->

                      <!-- <input  class="form-control" style="display:none;"
                                  placeholder="username"
                                  ng-model="newInvoice.username = currentUser.firstname + ' ' + currentUser.lastname"
                                  type="text"
                                  ng-required="true"
                          > -->
                          {{getInvoiceUsername(currentUser)}}



                          <!-- <input  class="form-control" style="display:none;"
                                      placeholder="companyname"
                                      ng-model="newInvoice.companyname = currentUser.companyname"
                                      type="text"
                                      ng-required="true"
                              > -->
                          {{getInvoiceCompanyName(currentUser)}}



                              <!-- <input  class="form-control" style="display:none;"
                                          placeholder="companyname"
                                          ng-model="newInvoice.email = currentUser.email"
                                          type="text"
                                          ng-required="true"
                                  > -->
                          {{getInvoiceEmail(currentUser)}}



					            <div ng-repeat="newItem in newItems">
					            	<!-- Student 1-n -->
						            <div class="form-group">
						              	<label for="Item1" class="col-sm-3 control-label">Select Item:</label>
						              	<div class="col-sm-5">
							                <select class="form-control"
							                id="Item{{$index+1}}"
							                ng-model="newItem.name"
                              ng-change="getPrice(newItem)"
							                ng-required="true"
							                >
								                <option>Burger Roll 35g</option>
        												<option>Burger Roll 65g</option>
        												<option>Burger Roll 75g</option>
        												<option>Burger Roll 85g</option>
        												<option>Burger Roll 105g</option>
							            	</select>
						              	</div>
						              	<span style="font-weight:700; margin-top:7px; float:left;"> X </span>
						              	<div class="col-sm-2" style="width:15.1%;">
							                <input  class="form-control"
							                id="Item{{$index+1}}Quantity"
							                placeholder="Qty"
							                ng-model="newItem.qty"
							                ng-required="true"
							                >
						              	</div>
						            </div>

						        	<!-- END Item 1-n -->

						        	<!-- Quantity -->
						            <!--END Quantity -->
                        <input  class="form-control" style="display:none;"
      							                placeholder="unitPrice"
      							                ng-model="newItem.unitPrice"
      							                type="number"
      							                ng-required="true"
      							        >


					            </div>
					         	<!-- end of item list ng-repeat -->

					         	<div class="form-group">
<!-- 		                          <label class="col-sm-3 control-label"></label> -->
		                          <div class="col-sm-2 col-sm-offset-8" style="margin-left: 64.2%;">
		                           <button type="submit"
					                class="btn btn-info"
					                ng-click="addItem();dateRefresh()">Add Item</button>
		                          </div>
		                      	</div>

					         	<!-- Delivered Date -->
					         	<div class="form-group">
					            	<label for="DeliveredDate" class="col-sm-3 control-label">Delivered Date:</label>
					            	<div class="col-sm-7">
					            		<p class="input-group">
          								<input type="text" class="form-control"
          								uib-datepicker-popup="{{format}}"
          								ng-model="newInvoice.deliveredDate" is-open="isOpen.deliveredDate"
          								datepicker-options="dateOptions"
          								ng-required="true"
          								close-text="Close" />

          								<span class="input-group-btn">
                							<button class="btn btn-default" ng-click="open($event,'deliveredDate')">
                								<i class="glyphicon glyphicon-calendar">
                								</i>
                							</button>
          								</span>
        								</p>
					            	</div>
					        	</div>
					        	<!-- END Delivered Date -->

					        	<!-- Invoice Date -->
					        	<!-- <div class="form-group" style="display:none;">
					            	<label for="StartDate" class="col-sm-3 control-label">Invoice Date</label>
					            	<div class="col-sm-7">
          								<input type="text" class="form-control"
          								ng-model="newInvoice.invoiceDate = currentDate"
          								readonly
          								>

					            	</div>
					        	</div> -->

					        	<!-- END Invoice Date -->

                    <!-- Comment Area -->
                    <div class="form-group">
                        <label for="description" class="col-sm-3 control-label">Description:</label>
                        <div class="col-sm-7">
                          <textarea class="form-control" ng-model="newInvoice.Description" rows="4" maxlength="200"></textarea>
                        </div>
                    </div>
                    <!-- END Comment Area -->
                    <!-- <input  class="form-control" style="display:none;"
                                placeholder="companyname"
                                ng-model="newInvoice.itemlist = getItemList(newItems)"
                                type="text"
                                ng-required="true"
                        > -->

                        <!-- <input  class="form-control" style="display:none;"
                                    placeholder="companyname"
                                    ng-model="newInvoice.deliverdate = getEmailDeliverDate(newInvoice)"
                                    type="text"
                                    ng-required="true"
                            > -->


                    <!-- <input  class="form-control" style="display:none;"
                                placeholder="companyname"
                                ng-model="newInvoice.totalprice = getTotalPrice(newItems)"
                                type="text"
                                ng-required="true"
                        > -->
<!--
                        <input  class="form-control" style="display:none;"
                                    placeholder="companyname"
                                    ng-model="newInvoice.totalpriceinemail = getTotalPrice(newItems).toFixed(2)"
                                    type="text"
                                    ng-required="true"
                            > -->


                        <!-- <input  class="form-control" style="display:none;"
                                    placeholder="companyname"
                                    ng-model="newInvoice.invoiceStatus = 'OWING'"
                                    type="text"
                                    ng-required="true"
                            > -->

			        		</form>
				        </div>
				        <!--END popping up form main part -->



				        <div class="modal-footer">
				        	<div class="form-group">
				                <div class="col-sm-8 col-sm-offset-2">

                          <button type="submit"
					                class="btn btn-primary"
					                 ng-disabled="createform.$invalid" data-toggle="modal" data-dismiss="modal" data-target="#confirmSubmission">Submit</button>

					                <button type="submit"
					                class="btn btn-warning"
					                ng-click="clearForm()">Reset</button>

                          <button type="submit"
                          class="btn btn-danger" data-dismiss="modal">Cancel</button>

				                </div>
			            	</div>
				        </div>
				    </div>
		        </div>
          	</div>
        <!-- END the form when click create button -->


        <!-- PAY form -->
        <div class="modal fade" role="dialog" id="payform">
          <div class="modal-dialog">
            <!-- modal content starts here -->
            <div class="modal-content">
              <!-- popping up form title part -->
              <div class="modal-header" style="border: medium none;">
              <h4 class="modal-title">Check and Pay</h4>
            </div>
          <!--END popping up form title part -->
          <!-- popping up form main part -->
              <div class="modal-body">
                <form class="form-horizontal"
                    name="createform"
                    novalidate>

                        <div class="form-group">
                          <p ng-hide="true">{{getTotalOpenInvoice(currentUser, invoiceItems, currentDate)}}</p>
                          <p ng-hide="true">{{getTotalOverdue(currentUser, invoiceItems, currentDate)}}</p>
                          <table class="table table-bordered" style="margin: 0px auto; width:94%;text-align: center;">
                              <tr>
                                <th style="width:34%;"></th>
                                <th style="width:20%;">Stark</th>
                                <th style="width:20%;">Lan</th>
                                <th style="width:20%;">Client</th>
                              </tr>
                              <tr class="success">
                                <th>Open Invoice Amount</th>
                                <td id="openinvoiceamount_Stark">0</td>
                                <td id="openinvoiceamount_Lan">0</td>
                                <td></td>
                              </tr>
                              <tr class="danger">
                                <th>Overdue Invoice Amount</th>
                                <td id="overdueinvoiceamount_Stark">0</td>
                                <td id="overdueinvoiceamount_Lan">0</td>
                                <td></td>
                              </tr>
                              <tr class="info">
                                <th>Credit</th>
                                <td id="credit_Stark">${{userinfos[0].usercredit.toFixed(2)}}</td>
                                <td id="credit_Lan">${{userinfos[1].usercredit.toFixed(2)}}</td>
                                <td></td>
                              </tr>
                          </table>
                        </div>



                        <div class="form-group" style="margin-top: 30px;">
                            <label for="selectcompanyname" class="col-sm-3 control-label">Select user:</label>
                            <div class="col-sm-5">
                              <select class="form-control"
                              id="billUsername"
                              ng-required="true"
                              >
                              <option value="" disabled selected></option>
                              <option value="Stark">Stark</option>
                              <option value="Lan">Lan</option>
                          </select>
                          </div>

                        </div>

                        <div class="form-group">
                            <label for="enteramount" class="col-sm-3 control-label">Enter an amount:</label>
                            <div class="col-sm-2">
                              <input  class="form-control"
                              id="billAmount"
							                ng-required="true"
							                >
                            </div>
                        </div>




                            <!-- <div class="form-group">
                                <label for="enteramount" class="col-sm-3 control-label">Contact Name:</label>
                                <div class="col-sm-5">
                                  <input  class="form-control"
                                  ng-model="formData.name"
    							                ng-required="true"
    							                >
                                </div>

                        </div> -->



                </form>
              </div>
              <!--END popping up form main part -->

              <div class="modal-footer">
                <div class="form-group">
                      <div class="col-sm-8 col-sm-offset-2">
                        <!-- <button type="submit"
                        class="btn btn-primary"
                        ng-click="addItem()">Add Item</button> -->

                        <button type="submit"
                        class="btn btn-primary"
                        ng-click="getPaymentDate(currentDate);payBill(invoiceItems, userinfos);postData_payBill();clearPaymentForm()"
                        ng-disabled="createform.$invalid">Submit</button>

                        <button type="submit"
                        class="btn btn-warning"
                        ng-click="clearPaymentForm()">Reset</button>

                        <button type="submit"
                        class="btn btn-danger" data-dismiss="modal">Close</button>

                      </div>
                  </div>
              </div>
          </div>
          </div>
          </div>



          <div class="modal fade" role="dialog" id="notificationform">
            <div class="modal-dialog">
              <!-- modal content starts here -->
              <div class="modal-content">
                <!-- popping up form title part -->
                <div class="modal-header">
                <h4 class="modal-title">Send Notification</h4>
              </div>
            <!--END popping up form title part -->
            <!-- popping up form main part -->
                <div class="modal-body">
                  <form class="form-horizontal"
                      name="createform"
                      novalidate>

                      <div class="form-group">
                          <div class="col-sm-9">
                            <textarea class="form-control" id="notificationarea" rows="4" maxlength="200"></textarea>
                          </div>
                      </div>



                  </form>
                </div>
                <!--END popping up form main part -->

                <div class="modal-footer">
                  <div class="form-group">
                        <div class="col-sm-8 col-sm-offset-2">
                          <!-- <button type="submit"
                          class="btn btn-primary"
                          ng-click="addItem()">Add Item</button> -->

                          <button type="submit"
                          class="btn btn-primary"
                          ng-click="getNotificationArea();postData_sendmsg()"
                          ng-disabled="createform.$invalid">Submit</button>

                          <button type="submit"
                          class="btn btn-warning"
                          ng-click="clearMsgForm()">Reset</button>

                          <button type="submit"
                          class="btn btn-danger" data-dismiss="modal">Close</button>

                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>



            <div class="modal fade" role="dialog" id="statementform">
              <div class="modal-dialog">
                <!-- modal content starts here -->
                <div class="modal-content">
                  <!-- popping up form title part -->
                  <div class="modal-header">
                  <h4 class="modal-title">Print Statement</h4>
                </div>
              <!--END popping up form title part -->
              <!-- popping up form main part -->
                  <div class="modal-body">
                    <form class="form-horizontal"
                        name="createform"
                        novalidate>

                        <div class="form-group" style="margin-top: 30px;">
                            <label for="selectcompanyname" class="col-sm-3 control-label">Select user:</label>
                            <div class="col-sm-5">
                              <select class="form-control"
                              id="statementUsername"
                              ng-required="true"
                              >
                              <option value="" disabled selected></option>
                              <option value="Stark">Stark</option>
                              <option value="Lan">Lan</option>
                              <option value="All">All Customers</option>
                          </select>
                          </div>

                        </div>



                    </form>
                  </div>
                  <!--END popping up form main part -->

                  <div class="modal-footer">
                    <div class="form-group">
                          <div class="col-sm-8 col-sm-offset-2">
                            <!-- <button type="submit"
                            class="btn btn-primary"
                            ng-click="addItem()">Add Item</button> -->

                            <button type="submit"
                            class="btn btn-primary"
                            ng-click="getStatementPDF(invoiceItems, currentDate)"
                            ng-disabled="createform.$invalid">Submit</button>


                            <button type="submit"
                            class="btn btn-danger" data-dismiss="modal">Close</button>

                          </div>
                      </div>
                  </div>
              </div>
              </div>
              </div>






              <div class="modal fade" role="dialog" id="historyform">
                <div class="modal-dialog" style="width: 90%;">
                  <!-- modal content starts here -->
                  <div class="modal-content">
                    <!-- popping up form title part -->
                    <div class="modal-header">
                    <h4 class="modal-title" style="display: inline-block;">Check History Order</h4>
                    <button type="submit" style="margin-left: 80%;display: inline-block;"
                    class="btn btn-danger" data-dismiss="modal">Close</button>
                  </div>
                <!--END popping up form title part -->
                <!-- popping up form main part -->
                    <div class="modal-body">
                      <form class="form-horizontal"
                          name="createform"
                          novalidate>

                          <div class="filterPartWrap" style=" height:50px; width:100%; margin: auto;">

                            <div class="form-group" style="width:30%;height:40px;display:inline-block;margin-top: 4px;" >
                              <span style="margin-left: 26px;color: rgb(133, 131, 131);">Filter By User:</span>
                              <input class="form-control" ng-model="query2.username" style="width: 200px;margin-left: 15px;display: inline-block;height: 35px;margin-top: 2px;text-align:left;padding-left: 7px;" Placeholder="e.g. Eric Snow">
                            </div>

                            <div class="form-group" style="width:31%;height:40px;display:inline-block;margin-top: 4px;" >

                              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By Invoice Date:</span>
                              <input class="form-control" ng-model="query2.invoiceDate" style="width: 200px;margin-left: 15px;display: inline-block; height: 35px;margin-top: 4px;text-align:left;padding-left: 7px;" Placeholder="e.g. Feb 10 2016">
                            </div>

                            <div class="form-group" style="width:30%;height:40px;display:inline-block;margin-top: 4px;" >

                              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By Delivery Date:</span>
                              <input class="form-control" ng-model="query2.deliveredDate" style="width: 200px;margin-left: 15px;display: inline-block; height: 35px;margin-top: 4px;text-align:left;padding-left: 7px;" Placeholder="e.g. Feb 10 2016">
                            </div>




                          </div>

                          <div class="form-group" style="margin-top: 30px;">
                            <table class="table table-bordered">
                              <thead>
                                <tr>
                                  <th>Invoice No.</th>
                                  <th>Client Name</th>
                                  <th>Invoice Date</th>
                                  <th>Deliver Date</th>
                                  <th>Item List</th>
                                  <th>Invoice Amount</th>
                                  <th>Status</th>
                                  <th>Action</th>
                                </tr>
                              </thead>
                              <tbody style="background-color: #fff;">

                                <tr ng-show="currentUser.userlevel != 'admin'" ng-repeat="invoice in invoice_history | orderBy:'invoiceNo' |filter:query2" ng-if="invoice.companyname == currentUser.companyname">
                                  <td>{{invoice.invoiceNo}}</td>
                                  <td>{{invoice.username}}</td>
                                  <td>{{invoice.invoiceDate.slice(4,24)}}</td>
                                  <td>{{invoice.deliveredDate.slice(4,15)}}</td>
                                  <td>{{getItemListInCheckOrderHistory(invoice)}}</td>
                                  <td>$ {{invoice.totalprice.toFixed(2)}}</td>
                                  <td>{{invoice.invoiceStatus}}</td>
                                  <td>
                                    <a  ng-click="openSelectedInvoicePDF(invoice_history,invoice.$id)" style="width: 55%;cursor:pointer;">View Detail</a>
                                </td>
                                </tr>

                                <tr ng-show="currentUser.userlevel == 'admin'" ng-repeat="invoice in invoice_history | orderBy:'invoiceNo' |filter:query2">
                                  <td>{{invoice.invoiceNo}}</td>
                                  <td>{{invoice.companyname}}</td>
                                  <td>{{invoice.invoiceDate.slice(4,24)}}</td>
                                  <td>{{invoice.deliveredDate.slice(4,15)}}</td>
                                  <td>{{getItemListInCheckOrderHistory(invoice)}}</td>
                                  <td>$ {{invoice.totalprice.toFixed(2)}}</td>
                                  <td>{{invoice.invoiceStatus}}</td>
                                  <td>
                                    <a  ng-click="openSelectedInvoicePDF(invoice_history,invoice.$id)" style="width: 55%;cursor:pointer;">View Detail</a>
                                </td>
                                </tr>


                              </tbody>
                            </table>
                          </div>



                      </form>
                    </div>
                    <!--END popping up form main part -->
                </div>
                </div>
                </div>


          <!-- <p id="demo">{{payBill(invoiceItems)}}</p> -->

        	<div class="nav-btn-group" style="position:absolute; top:46px; left:11.2%;">
	        	<button style="margin-top:19px;margin-right:15px;background-color: rgb(239, 107, 60); border-radius: 8px;padding: 8px 28px;margin-left: -17px;font-weight: 700;font-size: 13px;" class="btn btn-warning" data-toggle="modal" data-target="#createform" ng-click="clearForm();dateRefresh()">Create New Order</button>
	        	<button ng-if="currentUser.userlevel != 'admin'" style="margin-top:19px;margin-right:15px;padding:  9px 33px;background-color: rgb(239, 107, 60);border: 0px;border-radius: 8px;font-weight: 700;font-size: 13px;" class="btn btn-info">Quick Order</button>
            <button ng-if="currentUser.userlevel != 'admin'" style="margin-top:19px;margin-right:15px;padding: 6px 32px;background-color: rgb(255, 255, 255);border:3px solid rgb(239, 107, 60);border-radius: 8px;font-weight: 700;font-size: 13px; color: rgb(239, 107, 60);" class="btn btn-info" data-toggle="modal" data-target="#historyform" ng-click="clearForm();dateRefresh()">Check History Order</button>
            <button ng-if="currentUser.userlevel == 'admin'" style="margin-top:19px;margin-right:15px;padding: 6px 32px;background-color: rgb(255, 255, 255);border:3px solid rgb(239, 107, 60);border-radius: 8px;font-weight: 700;font-size: 13px; color: rgb(239, 107, 60);" class="btn btn-info" data-toggle="modal" data-target="#payform" ng-click="clearForm();dateRefresh()">Check & Pay</button>
            <button ng-if="currentUser.userlevel == 'admin'" style="margin-top:19px;margin-right:15px;padding: 6px 24px;background-color: rgb(255, 255, 255);border:3px solid rgb(239, 107, 60);border-radius: 8px;font-weight: 700;font-size: 13px; color: rgb(239, 107, 60);" class="btn btn-info" data-toggle="modal" data-target="#notificationform" ng-click="clearForm();dateRefresh()">Send Notification</button>
            <button ng-if="currentUser.userlevel == 'admin'" style="margin-top:19px;padding: 6px 24px;background-color: rgb(255, 255, 255);border:3px solid rgb(239, 107, 60);border-radius: 8px;font-weight: 700;font-size: 13px; color: rgb(239, 107, 60);" class="btn btn-info" data-toggle="modal" data-target="#statementform" ng-click="clearForm();dateRefresh()">Print Statement</button>
	        </div>
	       	<!-- <div class="row" style="text-align:center; width:95%;margin: 0px auto;">
	          	<h1 style="font-size:22px;margin-top:15px;margin-bottom:15px; margin-left:25px;">{{currentUser.firstname}} 's Invoice History</h1>
	        </div> -->

	          <hr/>

          	<div class="modal fade" role="dialog" id="mainForm">
		        <div class="modal-dialog">
		        	<!-- modal content starts here -->
		        	<div class="modal-content">
		        		<!-- popping up form title part -->
		        		<div class="modal-header">
    						<h4 class="modal-title">Edit Invoice Information</h4>
  						</div>
						<!--END popping up form title part -->
						<!-- popping up form main part -->
		        		<div class="modal-body">
				        	<form class="form-horizontal" name="mainform" novalidate>

					          <!-- uses ng-repeat to enable the item list to be added dynamicly. -->
					            <div ng-repeat="item in currentInvoiceItem.items">
					            	<!-- Item 1-n -->
						            <div class="form-group">
						              	<label for="item1" class="col-sm-3 control-label">Item {{$index+1}}</label>

						              	<div class="col-sm-7">
							                <select class="form-control"
							                id="Item{{$index+1}}"
							                placeholder="Item {{$index+1}} Name"
							                ng-model="item.name"
                              ng-change="getPrice(item)"
							                ng-required="true"
							                >
                                <option>Burger Roll 35g</option>
                                <option>Burger Roll 65g</option>
                                <option>Burger Roll 75g</option>
                                <option>Burger Roll 85g</option>
                                <option>Burger Roll 105g</option>
                            </select>
                          </div>
						            </div>
						            <!-- END Item 1-n -->

						            <!-- Quantity -->
						            <div class="form-group">
						              	<label for="Item1Qty" class="col-sm-3 control-label">Quantity</label>
						              	<div class="col-sm-7">
							                <input  class="form-control"
							                id="Item{{$index+1}}Qty"
							                placeholder="Quantity"
							                ng-model="item.qty"
							                ng-required="true"
							                >
						              	</div>
						            </div>
						            <!-- END Quantity -->
                        <input  class="form-control" style="display:none;"
                                    placeholder="unitPrice"
                                    ng-model="item.unitPrice"
                                    type="number"
                                    ng-required="true"
                            >


					            </div>
							    <!-- end of item list ng-repeat -->

						    	<!-- Delivered Date -->
					         	<div class="form-group">
					            	<label for="Status" class="col-sm-3 control-label">Delivered Date</label>
					            	<div class="col-sm-7">
					            		<p class="input-group">
          								<input type="text" class="form-control"
          								uib-datepicker-popup="{{format}}"
          								ng-model="currentInvoiceItem.deliveredDate" is-open="isOpen.deliveredDate"
          								datepicker-options="dateOptions"
          								ng-required="true"
          								close-text="Close" />

          								<span class="input-group-btn">
                							<button class="btn btn-default" ng-click="open($event,'deliveredDate')">
                								<i class="glyphicon glyphicon-calendar">
                								</i>
                							</button>
          								</span>
        								</p>
					            	</div>
					        	</div>
					        	<!-- END Delivered Date -->

					        	<!-- Invoice Date -->
                    <!-- <div class="form-group" style="display:none;">
					            	<label for="StartDate" class="col-sm-3 control-label">Invoice Date</label>
					            	<div class="col-sm-7">
          								<input type="text" class="form-control"
          								ng-model="currentInvoiceItem.invoiceDate = currentDate"
          								readonly
          								>

					            	</div>
					        	</div> -->
					        	<!-- END Invoice Date -->

                    <!-- <input  class="form-control" style="display:none;"
                                placeholder="companyname"
                                ng-model="currentInvoiceItem.totalprice = saveTotalPrice(currentInvoiceItem)"
                                type="text"
                                ng-required="true"
                        > -->
                        {{getOldTotalPrice(currentInvoiceItem)}}
                        <!-- {{getSelectedInvoicePDF(currentInvoiceItem)}} -->
					        </form>
				        </div>
				        <!--END popping up form main part -->
				        <div class="modal-footer">
				        	<div class="form-group">
				              <div class="col-sm-8 col-sm-offset-2">

				                <button class="btn btn-success"
				                		ng-click="getCurrentInvoiceDate(currentDate);saveTotalPrice(currentInvoiceItem);
                            getSaveItemList(currentInvoiceItem);saveEmailDeliverDate(currentInvoiceItem);
                            editPaidInvoice(currentInvoiceItem, currentUser,userinfos);
                            saveSelectedInvoicePDF(currentInvoiceItem, currentDate);saveItem(currentInvoiceItem)" data-dismiss="modal">
				                		Save</button>

                            <!-- <button class="btn btn-success"
    				                		ng-click="postData_editform()">
    				                		Send</button> -->


                            <button type="submit" class="btn btn-danger " data-toggle="modal" data-dismiss="modal" data-target="#confirmDelete">Delete</button>
				              </div>
				            </div>
				        </div>
				    </div>
		        </div>
          	</div>
	        <!-- END the popping up form when clicking edit button -->

          <div class="modal fade" role="dialog" id="confirmSubmission">
                <div class="modal-dialog">
                  <!-- modal content starts here -->
                  <div class="modal-content">
                    <!-- popping up form title part -->
                    <div class="modal-header">
                    <h4 class="modal-title">Comfirm Submission</h4>
                  </div>
                <!--END popping up form title part -->
                <!-- popping up form main part -->
                    <div class="modal-body">
                      <form class="form-horizontal" style="font-size:14px;" name="comfirmSubmission" novalidate>
                          Please confirm the following information is correct:
                          <br /><br />
                          - Customer name: &nbsp;&nbsp;{{newInvoice.username}}
                          <br />
                          - Company name: &nbsp;&nbsp;{{newInvoice.companyname}}
                          <br />
                          - Order Detail:
                          <div ng-repeat="newItem in newItems">
                            &nbsp;&nbsp;&nbsp;>> {{newItem.name}}&nbsp;&nbsp;x&nbsp;&nbsp;{{newItem.qty}}
                          </div>
                          - Total Price: &nbsp;&nbsp;${{getTotalPriceBeforeSubmit(newItems)}}
                          <br />
                          - Expected Delivery Date:&nbsp;&nbsp;{{newInvoice.deliveredDate.toString().slice(4,15)}}
                          <br /><br />
                          PlEASE NOTICE: Once you submit, the order <b>CANNOT</b> be modified/canceled/deleted AFTER {{getUnmodifiedInvoiceDate()}}.
                          <br />


                      </form>
                    </div>
                    <!--END popping up form main part -->
                    <div class="modal-footer">
                      <div class="form-group">
                          <div class="col-sm-8 col-sm-offset-2">
                            <!-- <button type="submit" class="btn btn-primary" ng-click="ctr.createNew()">Create New</button> -->

                            <button class="btn btn-danger"
                                data-dismiss="modal" ng-click="">
                                Back</button>

                            <button class="btn btn-info" data-dismiss="modal" ng-click="getInvoiceNumber();getInvoiceDate(currentDate);getItemList(newItems);
                      getEmailDeliverDate(newInvoice);getTotalPrice(newItems);getInvoiceDefaultDeliveryStatus();getInvoiceDefaultStatus(currentUser, userinfos);
                      addInvoice();createOrderInvoicePDF(newInvoice, newItems)">Submit</button>
                          </div>
                        </div>
                    </div>
                </div>
                </div>
                </div>
              <!-- END The confirm popup when user clicks "submit" -->

      <!-- The confirm popup when user clicks "delete" -->

          <div class="modal fade" role="dialog" id="confirmDelete">
                <div class="modal-dialog">
                  <!-- modal content starts here -->
                  <div class="modal-content">
                    <!-- popping up form title part -->
                    <div class="modal-header">
                    <h4 class="modal-title">Delete Invoice</h4>
                  </div>
                <!--END popping up form title part -->
                <!-- popping up form main part -->
                    <div class="modal-body">
                      <form class="form-horizontal" name="confirmDelete" novalidate>
                        This invoice will be permenantly deleted and cannot be rollback,Please confirm your operation!
                      </form>
                    </div>
                    <!--END popping up form main part -->
                    <div class="modal-footer">
                      <div class="form-group">
                          <div class="col-sm-8 col-sm-offset-2">
                            <!-- <button type="submit" class="btn btn-primary" ng-click="ctr.createNew()">Create New</button> -->

                            <button class="btn btn-info"
                                data-dismiss="modal" ng-click="">
                                Back</button>

                                <button type="submit" class="btn btn-danger " data-dismiss="modal"
                                ng-click="getCurrentInvoiceDate(currentDate);saveTotalPrice(currentInvoiceItem);
                                getSaveItemList(currentInvoiceItem);removePaidInvoice(currentInvoiceItem,currentUser,userinfos);postData_deleteform();removeInvoiceItem(currentInvoiceItem);">Delete</button>
                          </div>
                        </div>
                    </div>
                </div>
                </div>
                </div>



	        <!-- END of the form part -->

	        <!-- the search bar -->

          <form id="QUT-top-search2" class="navbar-form navbar-right">
            	<input type="text" ng-model="searchText" class="search-input" placeholder="Search...">
          	</form>
	        <!-- END the search bar -->

	        <!-- pagination -->

			<!-- END pagination -->

	        </div>
			<!-- invoice amount part (Below the header)-->

      <div class="row">
        <!-- <div class="col-sm-10">
        <uib-alert ng-show="copyrightAlert.type" type="{{copyrightAlert.type}}"
        close="closeAlert(copyrightAlert)">{{copyrightAlert.msg}}</uib-alert>
        </div> -->
        <div class="col-sm-10">
        <uib-alert ng-show="alerts.type" type="{{alerts.type}}"
        close="closeAlert(alerts)">{{alerts.msg}}</uib-alert>
        </div>
      </div>





	        <div class="amountPartWrap" ng-if="currentUser.userlevel == 'Customer'" style="margin-left: 18%; width: 90%; height:100px;">
	        	<div style="width:4px;height:60px; background:green;float:left;margin-top:1%;"></div>
	        	<div class="col-sm-4" style="width:28%;height:95px;display:inline-block;float:left;">
            		<span style="width:100%; font-size:32px;display:block;color:#858383;">$ {{getTotalOpenInvoice(currentUser, invoiceItems, currentDate)}}</span>
            		<span style="text-align:center; font-size:16px;color:#bebcbd;">Open Invoice</span>
	        	</div>
	        	<div style="width:4px;height:60px; background:red;float:left;margin-top:1%;"></div>
	            <div class="col-sm-4" style="width:28%;height:95px;display:inline-block;">
	            	<span style="width:100%; font-size:32px;display:block;color:#858383;">$ {{getTotalOverdue(currentUser, invoiceItems, currentDate)}}</span>
            		<span style="text-align:center; font-size:16px;color:#bebcbd;">Overdue Invoice</span>
	        	</div>
	        	<div style="width:4px;height:60px; background:blue;float:left;margin-top:1%;"></div>
	        	<div class="col-sm-4" style="width:28%;height:95px;display:inline-block;">
	        		<span style="width:100%; font-size:32px;display:block;color:#858383;">$ {{currentUser.usercredit.toFixed(2)}}</span>
            		<span style="text-align:center; font-size:16px;color:#bebcbd;">Account Credit</span>
	        	</div>
	        </div>

          <!-- <div class="amountPartWrap" ng-if="currentUser.userlevel == 'admin'" style="margin-left: 5%; width: 90%; height:100px;border: 2px solid #000">
	        </div> -->


          <!-- filter bar-->

          <div ng-show="currentUser.userlevel !='admin'" class="filterPartWrap" style=" height:50px; width:96.3%; margin: auto;">
            <div ng-show="currentUser.companyname =='HAHAHA'" class="form-group" style="width:30%;height:40px;display:inline-block;margin-top: 4px;" >
              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By Company</span>
              <input class="form-control" ng-model="query.companyname" style="width: 200px;margin-left: 15px;display: inline-block;height: 35px;margin-top:2px; text-align:left;padding-left: 7px;" Placeholder="e.g. Tekkers">
            </div>

            <div ng-show="currentUser.companyname !='HAHAHA'" class="form-group" style="width:30%;height:40px;display:inline-block;margin-top: 4px;" >
              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By User:</span>
              <input class="form-control" ng-model="query.username" style="width: 200px;margin-left: 15px;display: inline-block;height: 35px;margin-top: 2px;text-align:left;padding-left: 7px;" Placeholder="e.g. Eric Snow">
            </div>


            <div class="form-group" style="width:30%;height:40px;display:inline-block;margin-top: 4px;">
              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By Status:</span>
              <input class="form-control" ng-model="query.invoiceStatus" style="width: 200px;margin-left: 15px;display: inline-block;height: 35px;margin-top: 4px;text-align:left;padding-left: 7px;" Placeholder="e.g. Owing">
            </div>

            <div class="form-group" style="width:30%;height:40px;display:inline-block;margin-top: 4px;" >

              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By Date:</span>
              <input class="form-control" ng-model="query.deliveredDate" style="width: 200px;margin-left: 15px;display: inline-block; height: 35px;margin-top: 4px;text-align:left;padding-left: 7px;" Placeholder="e.g. Feb 10 2016">
            </div>

          </div>






          <div ng-show="currentUser.userlevel =='admin'" class="filterPartWrap" style=" height:50px; width:120%; margin: auto auto auto -10%;">
            <div class="form-group" style="width:21%;height:40px;display:inline-block;margin-top: 4px;" >
              <span style="margin-left: 26px;color: rgb(133, 131, 131);">By Company</span>
              <input class="form-control" ng-model="query.companyname" style="width: 150px;margin-left: 15px;display: inline-block;height: 35px;margin-top:2px; text-align:left;padding-left: 7px;" Placeholder="e.g. Tekkers">
            </div>

            <div class="form-group" style="width:20%;height:40px;display:inline-block;margin-top: 4px;">
              <span style="margin-left: 10px;color: rgb(133, 131, 131);">By Status:</span>
              <input class="form-control" ng-model="query.invoiceStatus" style="width: 150px;margin-left: 15px;display: inline-block;height: 35px;margin-top: 4px;text-align:left;padding-left: 7px;" Placeholder="e.g. Owing">
            </div>

            <div class="form-group" style="width:20%;height:40px;display:inline-block;margin-top: 4px;" >

              <span style="margin-left: -7px;color: rgb(133, 131, 131);">By Date:</span>
              <input class="form-control" ng-model="query.deliveredDate" style="width: 200px;margin-left: 15px;display: inline-block; height: 35px;margin-top: 4px;text-align:left;padding-left: 7px;" Placeholder="e.g. Feb 10 2016">
            </div>


            <div class="form-group" style="width:17%;height:40px;display:inline-block;margin-top: 4px;margin-left: 3%;" >

            <button type="submit"
              class="btn btn-info btn-lg btn-block" style="width: 235px;display: inline-block; height: 35px;padding: 5px 4px;font-family: 'Lucida Sans Unicode','Lucida Grande',sans-serif;"
              data-toggle="modal" data-target="#historyform" ng-click="clearForm();dateRefresh()">
              <span class="glyphicon glyphicon-list-alt"></span> Check History Invoice
            </button>

          </div>


            <div class="form-group" style="width:15%;height:40px;display:inline-block;margin-top: 4px;margin-left: 2%;" >

            <button type="submit"
              class="btn btn-success btn-lg btn-block" style="width: 181px;display: inline-block; height: 35px;padding: 5px 4px;font-family: 'Lucida Sans Unicode','Lucida Grande',sans-serif;"
              ng-click="addDeliveredInvoiceToHistory(invoiceItems)">
              <span class="glyphicon glyphicon-transfer"></span> Organize Form
            </button>

          </div>



        </div>





	        <!-- the invoice displaying part -->
	        <div class="row" style="margin: 0px auto;">
            <div ng-repeat="invoice in invoiceItems | orderBy:'invoiceNo' | filter:query | filter:searchText"
             ng-if="(invoice.companyname == currentUser.companyname && currentUser.userlevel != 'admin' && invoice.invoiceStatus != 'PAID')
             || (invoice.companyname == currentUser.companyname && currentUser.userlevel != 'admin' && invoice.invoiceStatus == 'PAID' && editDisable(invoice, currentDate) == '1')"
             class="col-md-3 invoicebox" >

            <!-- <div dir-paginate="invoice in invoiceItems | orderBy:'-invoiceDate' | filter:query | filter:searchText | itemsPerPage:9" ng-if="invoice.companyname == currentUser.companyname && currentUser.userlevel != 'admin'" pagination-id="staff" class="col-md-3 invoicebox"> -->

                  	<!-- The invoiceBox Top Part -->
                    <div class="invoiceBoxTopWrapper" style="height:16%; margin:0 auto;background:#fafafa;">
                    	<div style="width:40%;display:inline-block; text-align:center;float:left; height:57px; padding-top:20px;">
                    		<span style="width:100%; font-size:20px;font-weight:700;margin-left: 17px;">{{invoice.username}}</span>
                        <!-- <span style="width:100%; font-size:20px;">{{currentUser.companyname}}</span> -->
                    		<span style="text-align:center;"></span>
                    	</div>
                    	<div style="width:18%;display:inline-block; text-align:center;float:left; height:57px; padding-top:15px;">
                    		<span style="width:100%; font-size:20px;display:block;"></span>
                    		<span style="text-align:center;"></span>
                    	</div>
                    	<div style="width:42%;display:inline-block; text-align:center;float:left; height:57px; padding-top:15px;">
                    		<span style="width:100%; font-size:17px; font-weight:700;margin-right: 39px;">{{invoice.deliveredDate.slice(4,15)}}</span>
                    		<span style="text-align:center; color:#858383;margin-right: 36px;">Delivered</span>
                    	</div>

                    </div>
                    <!-- END The invoiceBox Top Part -->
                    <!-- The invoice status-->
                    <div ng-if="currentUser.userlevel != 'staff'">
                      <div ng-if="invoice.invoiceStatus == 'OVERDUE'" style="width:70px;height:20px;background-color:red; border-radius:6px; position:absolute;left:74.8%; top:84px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                        {{invoice.invoiceStatus}}
                      </div>
                      <div ng-if="invoice.invoiceStatus == 'OWING'" style="width:70px;height:20px;background-color:orange; border-radius:6px; position:absolute;left:74.8%; top:84px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                        {{invoice.invoiceStatus}}
                      </div>
                      <div ng-if="invoice.invoiceStatus == 'PAID'" style="width:70px;height:20px;background-color:grey; border-radius:6px; position:absolute;left:74.8%; top:84px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                        {{invoice.invoiceStatus}}
                      </div>
                    </div>


                    <!-- The invoice information Part -->
                    <div class="invoiceInfoWrap" style="height:64px;border-top:1px solid #bdbdbd; border-bottom:1px solid #bdbdbd;">
	                    <table style="text-align:center; margin-bottom:0px;color:#858383;" class="table table-striped table-hover">
	                    <tr style="background:#f1f1f1;">
	                    	<td style="line-height:14px;font-size: 13px;">INVOICE NO.</td>
	                    	<td style="line-height:14px;text-align: left;">{{invoice.invoiceNo}}</td>

	                    	<!-- <th>{{invoice.invoiceDate.slice(4,15)}}</th> -->
	                    </tr>
                      <tr style="background:#f1f1f1;">
                        <td style="border-top:none;line-height:14px;font-size: 13px;">ORDER DATE</td>
                        <!-- <td>{{invoice.$id.slice(4,15)}}</td> -->
                        <td style="border-top:none;line-height:14px;text-align: left;">{{invoice.invoiceDate.slice(4,24)}}</td>

                      </tr>
                    </table>
                    </div>
                    <!-- END The invoice information Part -->

                    <!-- The invoiceBox middle part(item list part) -->
                    <div class="invoiceBoxMiddleWrap" style="height:55%;">
	                    <table style="text-align:center;" class="table table-striped table-hover">
                        <thead>
	                    	<tr>
	                    		<th>Item Name</th>
	                    		<th>Quantity</th>
	                    		<th>Price</th>
	                    	</tr>
                      </thead>
	                    	<tr ng-repeat="itemInfo in invoice.items">
	                    		<td>{{itemInfo.name}}</td>
	                    		<td>{{itemInfo.qty}}</td>
                          <td ng-init="itemTotal = itemInfo.unitPrice * itemInfo.qty;">$ {{itemInfo.unitPrice}}</td>

	                    	</tr>
                        <!-- <tfoot style="margin-top:3px; border-bottom:1px solid #000;">
                            <td style="font-weight:700">TOTAL</td>
                            <td></td>
                            <td style="font-weight:700">$2321</td>
                        </tfoot> -->
	                   </table>

                     <hr style="border-color: #bdbdbd; margin:-20px 0 0 0;"/>
                     <!-- the line below the item rows -->

                     <div style=" font-weight:500; float:right; font-size:18px; padding:5px 16px;">
                       <span>Total:</span>
                       <span style="margin-left:38px;">$ {{invoice.totalprice.toFixed(2)}}</span>
                     </div>
                   </div>
                    <!-- END The invoiceBox middle part(item list part) -->
                    <!-- The invoiceBox button Part -->
                    <div class="invoiceBoxButtonWrap" style="width:90%; margin:0 auto;">



                      <!-- 1. If order_date == current_date && order_time < 13:30 && current_time < 13:30 -->
	                    <button ng-if="editDisable(invoice, currentDate) == 1 "
                      class="btn btn-success btn-lg btn-block" data-toggle="modal" data-target="#mainForm" ng-click="setSelectedInvoiceItem(invoice.$id);">
    			            Edit
    			            </button>

                      <!-- 4. EDIT BUTTON DISABLE -->
                      <button ng-if=" editDisable(invoice, currentDate) == 0"class="btn btn-success disabled btn-lg btn-block">
                      Edit
                      </button>




			            <!-- <button class="btn btn-danger btn-lg btn-block" ng-click="invoiceItems.$remove(invoice);">
			            Delete
			            </button> -->
		            </div>
                    <!-- END The invoiceBox button Part -->
				</div>

			</div>





      <div ng-show="currentUser.userlevel == 'admin'" style="margin-top: 23px;width: 115%;margin-left: -8%;">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Deliver Date</th>
              <th>Invoice No.</th>
              <th>Client Name</th>
              <th>Invoice Date</th>
              <th>Invoice Amount</th>
              <th>Payment Status</th>
              <th>Delivery Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody style="background-color: #fff;">
            <tr ng-repeat="invoice in invoiceItems | orderBy:'deliveredDate_Num' |filter:query | filter:searchText">
              <td>{{invoice.deliveredDate.slice(4,15)}}</td>
              <td>{{invoice.invoiceNo}}</td>
              <td>{{invoice.companyname}}</td>
              <td>{{invoice.invoiceDate.slice(4,24)}}</td>
              <td>$ {{invoice.totalprice.toFixed(2)}}</td>
              <td>{{invoice.invoiceStatus}}</td>
              <td>{{invoice.deliveryStatus}}</td>
              <td>
                <a  ng-click="openSelectedInvoicePDF(invoiceItems,invoice.$id)" style="width: 55%;cursor:pointer;">View Detail</a>
                <button style="font-size: 13px;width: 45%;border-radius: 6px;padding: 3px 4px;display: inline-block;float: right;" ng-if="invoice.invoiceStatus != 'PAID'"class="btn btn-success btn-lg btn-block" data-toggle="modal"
                data-target="#mainForm" ng-click="setSelectedInvoiceItem(invoice.$id)">
                    Edit
                </button>
                <button type="submit" style="font-size: 13px;width: 45%;border-radius: 6px;padding: 3px 4px;display: inline-block;float: right;"ng-if="invoice.invoiceStatus == 'PAID' && invoice.deliveryStatus == 'Not Delivered'" class="btn btn-danger btn-lg btn-block"
                data-toggle="modal" data-target="#confirmDelete" >
                Delete
                </button>
                <button type="submit" style="font-size: 13px;width: 45%;border-radius: 6px;padding: 3px 4px;display: inline-block;float: right;"ng-if="invoice.invoiceStatus == 'PAID' && invoice.deliveryStatus == 'Delivered'" class="btn btn-info btn-lg btn-block"
                ng-click="addSelectedDeliveredInvoiceToHistory(invoice.$id)" >
                Done
                </button>
            </td>
            </tr>
          </tbody>
        </table>
      </div>
























      <div ng-repeat="invoice in invoiceItems | orderBy:'deliveredDate_Num' |filter:query | filter:searchText"
       ng-if="currentUser.companyname == 'HAHAHA'" class="col-md-3 invoicebox" style="display:none;">

      <!-- <div dir-paginate="invoice in invoiceItems | orderBy:'-invoiceDate' |filter:query | filter:searchText | itemsPerPage:6" pagination-id="admin" ng-show="currentUser.companyname == 'HAHAHA'" class="col-md-3 invoicebox"> -->

                  <!-- The invoiceBox Top Part -->
                  <div class="invoiceBoxTopWrapper" style="height:16%; margin:0 auto;background:#fafafa;">
                    <div style="width:40%;display:inline-block; text-align:center;float:left; height:57px; padding-top:20px;">
                      <span style="width:100%; font-size:20px;font-weight:700;margin-left: 17px;">{{invoice.companyname}}</span>
                      <!-- <span style="width:100%; font-size:20px;">{{currentUser.companyname}}</span> -->
                      <span style="text-align:center;"></span>
                    </div>
                    <div style="width:18%;display:inline-block; text-align:center;float:left; height:57px; padding-top:15px;">
                      <span style="width:100%; font-size:20px;display:block;"></span>
                      <span style="text-align:center;"></span>
                    </div>
                    <div style="width:42%;display:inline-block; text-align:center;float:left; height:57px; padding-top:15px;">
                      <span style="width:100%; font-size:17px; font-weight:700;margin-right: 39px;">{{invoice.deliveredDate.slice(4,15)}}</span>
                      <span style="text-align:center; color:#858383;margin-right: 36px;">Delivered</span>
                    </div>

                  </div>
                  <!-- END The invoiceBox Top Part -->

                  <!-- The invoice status-->
                  <div ng-if="invoice.invoiceStatus == 'OVERDUE'" style="width:70px;height:20px;background-color:red; border-radius:6px; position:absolute;left:74.8%; top:84px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                    {{invoice.invoiceStatus}}
                  </div>
                  <div ng-if="invoice.invoiceStatus == 'OWING'" style="width:70px;height:20px;background-color:orange; border-radius:6px; position:absolute;left:74.8%; top:84px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                    {{invoice.invoiceStatus}}
                  </div>
                  <div ng-if="invoice.invoiceStatus == 'PAID'" style="width:70px;height:20px;background-color:grey; border-radius:6px; position:absolute;left:74.8%; top:84px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                    {{invoice.invoiceStatus}}
                  </div>


                  <!-- <div ng-if="invoice.invoiceStatus == 'OVERDUE'" style="width:70px;height:20px;background-color:red; border-radius:6px; position:absolute;left:72.8%; top:83px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                    {{invoice.invoiceStatus}}
                  </div>
                  <div ng-if="invoice.invoiceStatus == 'OWING'" style="width:70px;height:20px;background-color:orange; border-radius:6px; position:absolute;left:72.8%; top:83px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                    {{invoice.invoiceStatus}}
                  </div>
                  <div ng-if="invoice.invoiceStatus == 'PAID'" style="width:70px;height:20px;background-color:grey; border-radius:6px; position:absolute;left:72.8%; top:83px;text-align:center;color:#fff; font-size:11px;line-height:19px;">
                    {{invoice.invoiceStatus}}
                  </div> -->



                  <!-- The invoice information Part -->
                  <div class="invoiceInfoWrap" style="height:64px;border-top:1px solid #bdbdbd; border-bottom:1px solid #bdbdbd;">
                    <table style="text-align:center; margin-bottom:0px;color:#858383;" class="table table-striped table-hover">
                    <tr style="background:#f1f1f1;">
                      <td style="line-height:14px;font-size: 13px;">INVOICE NO.</td>
                      <td style="line-height:14px;text-align: left;">{{invoice.invoiceNo}}</td>

                      <!-- <th>{{invoice.invoiceDate.slice(4,15)}}</th> -->
                    </tr>
                    <tr style="background:#f1f1f1;">
                      <td style="border-top:none;line-height:14px;font-size: 13px;">ORDER DATE</td>
                      <!-- <td>{{invoice.$id.slice(4,15)}}</td> -->
                      <td style="border-top:none;line-height:14px;text-align: left;">{{invoice.invoiceDate.slice(4,24)}}</td>

                    </tr>
                  </table>
                  </div>
                  <!-- END The invoice information Part -->

                  <!-- The invoiceBox middle part(item list part) -->
                  <div class="invoiceBoxMiddleWrap" style="height:55%;">
                    <table style="text-align:center;" class="table table-striped table-hover">
                      <thead>
                      <tr>
                        <th>Item Name</th>
                        <th>Quantity</th>
                        <th>Price</th>
                      </tr>
                    </thead>
                      <tr ng-repeat="itemInfo in invoice.items">
                        <td>{{itemInfo.name}}</td>
                        <td>{{itemInfo.qty}}</td>
                        <td ng-init="itemTotal = itemInfo.unitPrice * itemInfo.qty;">$ {{itemInfo.unitPrice}}</td>

                      </tr>
                      <!-- <tfoot style="margin-top:3px; border-bottom:1px solid #000;">
                          <td style="font-weight:700">TOTAL</td>
                          <td></td>
                          <td style="font-weight:700">$2321</td>
                      </tfoot> -->
                   </table>

                   <hr style="border-color: #bdbdbd; margin:-20px 0 0 0;"/>
                   <!-- the line below the item rows -->

                   <div style=" font-weight:500; float:right; font-size:18px; padding:5px 16px;">
                     <span>Total:</span>
                     <span style="margin-left:38px;">$ {{invoice.totalprice.toFixed(2)}}</span>
                   </div>
                 </div>
                  <!-- END The invoiceBox middle part(item list part) -->
                  <!-- The invoiceBox button Part -->
                  <div class="invoiceBoxButtonWrap" style="width:90%; margin:0 auto;">
                    <button ng-if="invoice.invoiceStatus != 'PAID'"class="btn btn-success btn-lg btn-block" data-toggle="modal" data-target="#mainForm" ng-click="setSelectedInvoiceItem(invoice.$id);">
                Edit
                </button>
                <button ng-if="invoice.invoiceStatus == 'PAID'" class="btn btn-danger btn-lg btn-block" ng-click="invoiceItems.$remove(invoice);">
                Delete
                </button>
              </div>
                  <!-- END The invoiceBox button Part -->
      </div>
      <!-- <dir-pagination-controls
          template-url="js/lib/dirPagination.tpl.html" style="float:right;" pagination-id="admin" ng-hide="currentUser.companyname != 'HAHAHA'">
      </dir-pagination-controls>
      <dir-pagination-controls
          template-url="js/lib/dirPagination.tpl.html" style="float:right;" pagination-id="staff" ng-hide="currentUser.companyname == 'HAHAHA'">
      </dir-pagination-controls> -->
    </div>
    </div>
